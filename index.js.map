{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '51075470-1937ac32d69b36f6f43f67dbf';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`HTTP error! Status: ${response.status}`);\n  }\n  return await response.json();\n}\n","export function createGalleryMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <div class=\"info-box\"><span class=\"label\">Likes:</span> ${likes}</div>\n            <div class=\"info-box\"><span class=\"label\">Views:</span> ${views}</div>\n            <div class=\"info-box\"><span class=\"label\">Comments:</span> ${comments}</div>\n            <div class=\"info-box\"><span class=\"label\">Downloads:</span> ${downloads}</div>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n};\n\nlet lightbox = null;\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n\n  const searchForm = event.target;\n  const searchedQuery = searchForm.elements.user_query.value.trim();\n\n  refs.loader.classList.add('is-visible');\n  refs.gallery.innerHTML = '';\n\n  if (!searchedQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    refs.loader.classList.remove('is-visible');\n    return;\n  }\n\n  fetchImages(searchedQuery)\n    .then(result => {\n      if (result.hits.length === 0) {\n        iziToast.error({\n          title: 'No results',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        refs.gallery.innerHTML = '';\n        return;\n      }\n\n      refs.gallery.innerHTML = createGalleryMarkup(result.hits);\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.js-gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    })\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `Something went wrong: ${err}`,\n        position: 'topRight',\n        timeout: 5000,\n      });\n    })\n    .finally(() => {\n      refs.loader.classList.remove('is-visible');\n    });\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\n"],"names":["API_KEY","BASE_URL","fetchImages","query","url","response","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","lightbox","onSearchFormSubmit","event","searchedQuery","iziToast","result","SimpleLightbox","err"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAO,CACvC,MAAMC,EAAM,GAAGH,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,2DAEKE,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAO,MAAMA,EAAS,MACxB,CCbO,SAASC,EAAoBC,EAAQ,CAC1C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,0CAE8BL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,sEAGFC,CAAK;AAAA,sEACLC,CAAK;AAAA,yEACFC,CAAQ;AAAA,0EACPC,CAAS;AAAA;AAAA;AAAA,OAI9E,EACA,KAAK,EAAE,CACZ,CCjBA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,iBAAiB,EACpD,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEA,IAAIC,EAAW,KAEf,MAAMC,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EAGpB,MAAMC,EADaD,EAAM,OACQ,SAAS,WAAW,MAAM,OAK3D,GAHAH,EAAK,OAAO,UAAU,IAAI,YAAY,EACtCA,EAAK,QAAQ,UAAY,GAErB,CAACI,EAAe,CAClBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACDL,EAAK,OAAO,UAAU,OAAO,YAAY,EACzC,MACD,CAEDb,EAAYiB,CAAa,EACtB,KAAKE,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BD,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,UACpB,CAAS,EACDL,EAAK,QAAQ,UAAY,GACzB,MACD,CAEDA,EAAK,QAAQ,UAAYT,EAAoBe,EAAO,IAAI,EAEnDL,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIM,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACxB,CAAS,CAIT,CAAK,EACA,MAAMC,GAAO,CACZH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBAAyBG,CAAG,GACrC,SAAU,WACV,QAAS,GACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbR,EAAK,OAAO,UAAU,OAAO,YAAY,CAC/C,CAAK,CACL,EAEAA,EAAK,WAAW,iBAAiB,SAAUE,CAAkB"}