{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n};\n\nlet lightbox = null;\n\nconst createGalleryMarkup = images =>\n  images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n  <div class=\"info-box\"><span class=\"label\">Likes</span><span>${likes}</span></div>\n  <div class=\"info-box\"><span class=\"label\">Views</span><span>${views}</span></div>\n  <div class=\"info-box\"><span class=\"label\">Comments</span><span>${comments}</span></div>\n  <div class=\"info-box\"><span class=\"label\">Downloads</span><span>${downloads}</span></div>\n</div>\n\n      </li>\n    `\n    )\n    .join('');\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n\n  const searchForm = event.target;\n  const searchedQuery = searchForm.elements.user_query.value.trim();\n\n  refs.loader.classList.add('is-visible');\n  refs.gallery.innerHTML = '';\n\n  if (!searchedQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  fetch(\n    `https://pixabay.com/api/?key=51075470-1937ac32d69b36f6f43f67dbf&orientation=horizontal&q=${searchedQuery}&image_type=photo&safesearch=true`\n  )\n    .finally(() => {\n      refs.loader.classList.remove('is-visible');\n    })\n    .then(responce => {\n      if (!responce.ok) {\n        throw new Error(responce.status);\n      }\n      return responce.json();\n    })\n    .then(result => {\n      if (result.hits.length === 0) {\n        iziToast.error({\n          title: 'No results',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        refs.gallery.innerHTML = '';\n\n        return;\n      }\n\n      refs.gallery.innerHTML = createGalleryMarkup(result.hits);\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.js-gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    })\n    .catch(err => {\n      iziToast.error({\n        title: 'Error',\n        message: `Something went wrong: ${err}`,\n        position: 'topRight',\n        timeout: 5000,\n      });\n    });\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\n"],"names":["refs","lightbox","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","onSearchFormSubmit","event","searchedQuery","iziToast","responce","result","SimpleLightbox","err"],"mappings":"6vBAMA,MAAMA,EAAO,CACX,WAAY,SAAS,cAAc,iBAAiB,EACpD,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEA,IAAIC,EAAW,KAEf,MAAMC,EAAsBC,GAC1BA,EACG,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BL,CAAa;AAAA,4CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gEAGNC,CAAK;AAAA,gEACLC,CAAK;AAAA,mEACFC,CAAQ;AAAA,oEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKxE,EACA,KAAK,EAAE,EAENC,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EAGpB,MAAMC,EADaD,EAAM,OACQ,SAAS,WAAW,MAAM,OAK3D,GAHAZ,EAAK,OAAO,UAAU,IAAI,YAAY,EACtCA,EAAK,QAAQ,UAAY,GAErB,CAACa,EAAe,CAClBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,MACE,4FAA4FD,CAAa,mCAC1G,EACE,QAAQ,IAAM,CACbb,EAAK,OAAO,UAAU,OAAO,YAAY,CAC/C,CAAK,EACA,KAAKe,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BF,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,UACpB,CAAS,EACDd,EAAK,QAAQ,UAAY,GAEzB,MACD,CAEDA,EAAK,QAAQ,UAAYE,EAAoBc,EAAO,IAAI,EAEnDf,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIgB,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACxB,CAAS,CAIT,CAAK,EACA,MAAMC,GAAO,CACZJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBAAyBI,CAAG,GACrC,SAAU,WACV,QAAS,GACjB,CAAO,CACP,CAAK,CACL,EAEAlB,EAAK,WAAW,iBAAiB,SAAUW,CAAkB"}